<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ЗомбиГлобал — Arcade Outbreak</title>
  <style>
    :root{
      --ink:#E9FFF2;
      --mut:rgba(233,255,242,.72);
      --stroke:rgba(255,255,255,.10);

      --g:#45FF75;
      --b:#2FA9FF;
      --p:#B16BFF;
      --y:#FFB94A;

      --panel:rgba(6,10,12,.58);
      --panel2:rgba(9,14,16,.70);

      --r:18px;
      --shadow:0 22px 90px rgba(0,0,0,.55);
      --mono: ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace;
      --ui: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; color:var(--ink); font-family:var(--ui);
      background:#05070B;
      overflow-x:hidden;
    }

    /* ===== background (put bg.jpg next to index.html) ===== */
    .bg{
      position:fixed; inset:0; z-index:0;
      background:
        linear-gradient(180deg, rgba(0,0,0,.10), rgba(0,0,0,.70)),
        radial-gradient(1100px 700px at 50% 22%, rgba(69,255,117,.16), transparent 60%),
        radial-gradient(900px 650px at 82% 22%, rgba(47,169,255,.14), transparent 60%),
        radial-gradient(900px 650px at 35% 80%, rgba(177,107,255,.12), transparent 62%),
        url("bg.jpg") center/cover no-repeat;
      filter: saturate(1.05) contrast(1.05) brightness(.75);
      transform: scale(1.03);
    }
    .vignette{
      position:fixed; inset:0; z-index:1; pointer-events:none;
      background:
        radial-gradient(1200px 800px at 50% 20%, rgba(0,0,0,.00), rgba(0,0,0,.55) 62%),
        linear-gradient(180deg, rgba(0,0,0,.10), rgba(0,0,0,.55));
    }
    .scan{
      position:fixed; inset:0; z-index:2; pointer-events:none;
      opacity:.12; mix-blend-mode:overlay;
      background: repeating-linear-gradient(0deg, rgba(255,255,255,.05) 0, rgba(255,255,255,.05) 1px, transparent 2px, transparent 4px);
    }
    .sparks{
      position:fixed; inset:0; z-index:2; pointer-events:none;
      opacity:.55;
      background:
        radial-gradient(2px 2px at 12% 28%, rgba(69,255,117,.9), transparent 60%),
        radial-gradient(2px 2px at 26% 62%, rgba(47,169,255,.85), transparent 60%),
        radial-gradient(2px 2px at 72% 22%, rgba(177,107,255,.85), transparent 60%),
        radial-gradient(2px 2px at 86% 58%, rgba(255,185,74,.85), transparent 60%),
        radial-gradient(2px 2px at 44% 78%, rgba(69,255,117,.8), transparent 60%);
      animation: float 6s ease-in-out infinite alternate;
    }
    @keyframes float{ from{transform:translateY(0)} to{transform:translateY(-10px)} }

    /* ===== layout ===== */
    .wrap{
      position:relative; z-index:3;
      width:min(1180px, calc(100% - 28px));
      margin:0 auto;
      padding: 14px 0 18px;
    }

    /* ===== top banner ===== */
    .banner{
      border-radius: 22px;
      border:1px solid var(--stroke);
      background: linear-gradient(180deg, rgba(7,12,14,.70), rgba(6,10,12,.40));
      box-shadow: var(--shadow);
      overflow:hidden;
      position:relative;
    }
    .banner::before{
      content:"";
      position:absolute; inset:0;
      background:
        linear-gradient(90deg, transparent, rgba(69,255,117,.10), transparent),
        repeating-linear-gradient(90deg, rgba(255,255,255,.02) 0, rgba(255,255,255,.02) 1px, transparent 2px, transparent 18px);
      opacity:.55;
      pointer-events:none;
      transform: skewY(-1.1deg);
    }
    .bannerTop{
      position:relative;
      padding: 10px 14px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      flex-wrap:wrap;
      border-bottom:1px solid rgba(255,255,255,.08);
    }
    .bannerTop .mini{
      font-family:var(--mono);
      letter-spacing:.12em;
      text-transform:uppercase;
      font-weight:900;
      font-size:12px;
      color: rgba(233,255,242,.82);
    }
    .hudMini{
      display:flex; gap:10px; flex-wrap:wrap; align-items:center;
      font-family:var(--mono); font-size:12px; letter-spacing:.06em;
    }
    .pill{
      display:inline-flex; align-items:center; gap:8px;
      padding:8px 10px;
      border-radius:999px;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(6,10,12,.45);
      color: rgba(233,255,242,.92);
      user-select:none;
    }
    .dot{width:8px;height:8px;border-radius:50%}
    .dg{background:var(--g); box-shadow:0 0 14px rgba(69,255,117,.45)}
    .db{background:var(--b); box-shadow:0 0 14px rgba(47,169,255,.35)}
    .dy{background:var(--y); box-shadow:0 0 14px rgba(255,185,74,.25)}

    .bannerMain{
      position:relative;
      padding: 14px 14px 16px;
      display:flex;
      justify-content:space-between;
      align-items:flex-end;
      gap:14px;
      flex-wrap:wrap;
    }

    .logoRow{display:flex; align-items:center; gap:12px}
    .bio{
      width:44px;height:44px;border-radius:14px;
      background:
        radial-gradient(circle at 35% 35%, rgba(255,185,74,.95), rgba(255,185,74,.10) 52%, transparent 62%),
        radial-gradient(circle at 70% 65%, rgba(69,255,117,.30), transparent 60%),
        linear-gradient(180deg, rgba(12,18,18,.95), rgba(6,10,12,.95));
      border:1px solid rgba(255,185,74,.30);
      box-shadow: 0 0 0 1px rgba(69,255,117,.10) inset;
    }
    .h1{
      margin:0;
      font-family:var(--mono);
      font-weight:1000;
      letter-spacing:.06em;
      text-transform:uppercase;
      font-size: 44px;
      line-height:1;
      text-shadow: 0 10px 40px rgba(0,0,0,.60);
    }
    @media (max-width: 520px){
      .h1{font-size: 34px}
    }

    /* ===== game body ===== */
    .stage{
      margin-top: 14px;
      display:grid;
      grid-template-columns: 360px 1fr 360px;
      gap:14px;
    }
    @media (max-width: 1050px){
      .stage{grid-template-columns: 1fr}
    }

    .panel{
      border-radius: var(--r);
      border:1px solid var(--stroke);
      background: var(--panel);
      backdrop-filter: blur(10px);
      box-shadow: var(--shadow);
      overflow:hidden;
      position:relative;
    }
    .panel::before{
      content:"";
      position:absolute; inset:0;
      background: radial-gradient(900px 360px at 20% -10%, rgba(69,255,117,.10), transparent 60%);
      opacity:.8; pointer-events:none;
    }
    .ph{
      position:relative;
      padding: 12px 14px;
      border-bottom:1px solid rgba(255,255,255,.10);
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:10px;
    }
    .ph b{
      font-family:var(--mono);
      letter-spacing:.12em;
      text-transform:uppercase;
      font-weight:1000;
      font-size:12px;
    }
    .pb{position:relative; padding:14px}

    /* ===== buttons (like screenshot) ===== */
    .btn{
      width:100%;
      border:0;
      cursor:pointer;
      user-select:none;
      padding: 14px 14px;
      border-radius: 14px;
      font-family:var(--mono);
      letter-spacing:.10em;
      text-transform:uppercase;
      font-weight:1000;
      font-size:12px;
      color: rgba(233,255,242,.96);
      border:1px solid rgba(255,255,255,.12);
      box-shadow: 0 14px 40px rgba(0,0,0,.35);
      transition: transform .08s ease, filter .15s ease;
      position:relative;
      overflow:hidden;
      text-align:left;
    }
    .btn:hover{filter:brightness(1.08)}
    .btn:active{transform:translateY(1px)}
    .btn:disabled{opacity:.45; cursor:not-allowed; filter:saturate(.7)}

    .btn::after{
      content:"";
      position:absolute; inset:-40% -20%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,.18), transparent);
      transform: rotate(12deg) translateX(-40%);
      opacity:.55;
    }
    .btn:hover::after{ transform: rotate(12deg) translateX(20%); transition: transform .5s ease; }

    .green{background: linear-gradient(180deg, rgba(69,255,117,.30), rgba(69,255,117,.10)); border-color: rgba(69,255,117,.34)}
    .blue {background: linear-gradient(180deg, rgba(47,169,255,.26), rgba(47,169,255,.08)); border-color: rgba(47,169,255,.30)}
    .purple{background: linear-gradient(180deg, rgba(177,107,255,.26), rgba(177,107,255,.08)); border-color: rgba(177,107,255,.30)}
    .yellow{background: linear-gradient(180deg, rgba(255,185,74,.24), rgba(255,185,74,.08)); border-color: rgba(255,185,74,.30)}

    .btnRow{display:grid; gap:10px}

    .smallRow{display:grid; gap:10px; margin-top:12px}
    .smallGrid{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:10px;
    }
    @media (max-width: 1050px){
      .smallGrid{grid-template-columns:1fr}
    }

    /* ===== status list ===== */
    .stat{
      display:flex; align-items:center; justify-content:space-between;
      padding: 10px 12px;
      border-radius: 14px;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(8,12,14,.48);
      font-family:var(--mono);
      font-size:12px;
      letter-spacing:.06em;
      text-transform:uppercase;
      margin-bottom:10px;
    }
    .stat span{color:rgba(233,255,242,.82)}
    .stat b{font-weight:1000}
    .glowG{color:var(--g); text-shadow:0 0 18px rgba(69,255,117,.22)}
    .glowB{color:var(--b); text-shadow:0 0 18px rgba(47,169,255,.18)}

    .mission{
      border-radius: 14px;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(8,12,14,.48);
      padding: 12px;
      font-family:var(--mono);
      font-size:12px;
      letter-spacing:.04em;
      color: rgba(233,255,242,.88);
      line-height:1.6;
    }

    /* ===== center content ===== */
    .centerTitle{
      margin:0;
      font-family:var(--mono);
      font-weight:1000;
      letter-spacing:.08em;
      text-transform:uppercase;
      font-size: 22px;
    }
    .desc{
      margin:10px 0 0;
      color: var(--mut);
      font-size: 14px;
      line-height:1.6;
      max-width: 70ch;
    }

    table{
      width:100%;
      border-collapse: collapse;
      font-family:var(--mono);
      font-size:12px;
      margin-top:12px;
      border-radius:14px;
      overflow:hidden;
    }
    th,td{padding:10px; border-bottom:1px solid rgba(255,255,255,.10); text-align:left}
    th{color:rgba(233,255,242,.70); letter-spacing:.12em; text-transform:uppercase; font-size:11px}
    tr:hover td{background:rgba(255,255,255,.05)}
    .num{color:var(--g); font-weight:1000}

    /* ===== footer tags ===== */
    .footer{
      margin-top: 14px;
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      justify-content:space-between;
      align-items:center;
    }
    .tag{
      display:inline-flex; align-items:center; gap:10px;
      padding:10px 12px;
      border-radius: 16px;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(7,10,12,.55);
      box-shadow: var(--shadow);
      font-family:var(--mono);
      font-size:12px;
      letter-spacing:.06em;
    }
    .tag a{color:rgba(233,255,242,.92); text-decoration:none}
    .tag a:hover{filter:brightness(1.08)}
    .toast{
      position:fixed; left:50%; bottom:14px; transform:translateX(-50%);
      z-index:10;
      background: rgba(7,10,12,.82);
      border:1px solid rgba(255,255,255,.14);
      border-radius:14px;
      padding:12px 14px;
      box-shadow: var(--shadow);
      font-family:var(--mono);
      font-size:12px;
      display:none;
      max-width:min(760px, calc(100vw - 24px));
    }
    .toast.show{display:block}
  </style>
</head>
<body>
  <div class="bg"></div>
  <div class="vignette"></div>
  <div class="scan"></div>
  <div class="sparks"></div>

  <div class="wrap">
    <!-- TOP BANNER -->
    <section class="banner">
      <div class="bannerTop">
        <div class="mini">ARCADE OUTBREAK • MEME GAME</div>
        <div class="hudMini">
          <div class="pill"><span class="dot dg"></span>ID: <b id="hudId">—</b></div>
          <div class="pill"><span class="dot db"></span>BY: <b id="hudBy">—</b></div>
          <div class="pill"><span class="dot dy"></span>INF: <b id="hudInf">—</b></div>
        </div>
      </div>
      <div class="bannerMain">
        <div class="logoRow">
          <div class="bio"></div>
          <h1 class="h1">ЗОМБИГЛОБАЛ</h1>
        </div>
        <div class="pill" style="border-color:rgba(177,107,255,.25)">
          <span class="dot" style="background:var(--p);box-shadow:0 0 14px rgba(177,107,255,.35)"></span>
          <span id="refHint">ref: —</span>
        </div>
      </div>
    </section>

    <!-- GAME STAGE -->
    <section class="stage">
      <!-- LEFT MENU -->
      <aside class="panel">
        <div class="ph">
          <b>OUTBREAK ARENA</b>
          <span class="pill"><span class="dot dg"></span>MENU</span>
        </div>
        <div class="pb">
          <div class="btnRow">
            <button class="btn green" id="btnClaim">GET INFECTION ID</button>
            <button class="btn blue" id="btnInfect" disabled>INFECT FRIEND</button>
            <button class="btn purple" id="btnTop">LEADERBOARD</button>
            <button class="btn yellow" id="btnLineage">VIEW LINEAGE</button>
          </div>

          <div class="smallRow">
            <div class="smallGrid">
              <a class="btn blue" id="btnBot" href="https://t.me/ZombieVirusLabBot" target="_blank" rel="noreferrer">OPEN BOT</a>
              <a class="btn blue" id="btnServer" href="https://t.me/zombievirus_server" target="_blank" rel="noreferrer">OPEN SERVER</a>
            </div>
            <button class="btn" id="btnReset" style="opacity:.85">RESET DEMO</button>
          </div>
        </div>
      </aside>

      <!-- CENTER (content) -->
      <main class="panel">
        <div class="ph">
          <b id="centerTitle">MAIN</b>
          <span class="pill"><span class="dot dy"></span>DEMO</span>
        </div>
        <div class="pb">
          <h2 class="centerTitle">Статус + Рейтинг = мем, который люди сами разнесут</h2>
          <p class="desc">
            Получаешь номер → делишься ссылкой → друзья заходят по <b>?ref=</b> → ты растёшь по заражениям.
            Следующий шаг: <b>share-card</b> (картинка “I’m #000123”), сезонные таблицы и “First 100”.
          </p>

          <table>
            <thead><tr><th>#</th><th>Infection</th><th>Infections</th><th>By</th></tr></thead>
            <tbody id="lb">
              <tr><td style="color:rgba(233,255,242,.55)">—</td><td class="num">—</td><td style="color:rgba(233,255,242,.55)">—</td><td style="color:rgba(233,255,242,.55)">—</td></tr>
            </tbody>
          </table>

          <div class="smallRow">
            <div class="smallGrid">
              <button class="btn blue" id="btnCopy" disabled>COPY LINK</button>
              <button class="btn green" id="btnFull">FULLSCREEN</button>
            </div>
          </div>
        </div>
      </main>

      <!-- RIGHT STATUS -->
      <aside class="panel">
        <div class="ph">
          <b>PLAYER STATUS</b>
          <span class="pill"><span class="dot dg"></span>ONLINE</span>
        </div>
        <div class="pb">
          <div class="stat"><span>INFECTION ID</span><b class="glowG" id="pId">—</b></div>
          <div class="stat"><span>INFECTED BY</span><b class="glowB" id="pBy">—</b></div>
          <div class="stat"><span>INFECTIONS</span><b class="glowG" id="pInf">—</b></div>

          <div class="mission">
            <b style="letter-spacing:.12em">MISSION:</b><br>
            1. GET ID<br>
            2. COPY LINK<br>
            3. INFECT FRIENDS<br>
            4. CLIMB TOP
          </div>
        </div>
      </aside>
    </section>

    <!-- FOOTER TAGS -->
    <div class="footer">
      <div class="tag">TG BOT: <a href="https://t.me/ZombieVirusLabBot" target="_blank" rel="noreferrer">@ZombieVirusLabBot</a></div>
      <div class="tag">TG SERVER: <a href="https://t.me/zombievirus_server" target="_blank" rel="noreferrer">@zombievirus_server</a></div>
    </div>
  </div>

  <div class="toast" id="toast"></div>

  <script>
    // ===== demo state (local) =====
    const LS = "zg_arcade_v1";
    const $ = (id)=>document.getElementById(id);
    const toastEl = $("toast");

    const fmt = (n)=>"#"+String(n).padStart(6,"0");

    function toast(t){
      toastEl.textContent = t;
      toastEl.classList.add("show");
      clearTimeout(toastEl._t);
      toastEl._t = setTimeout(()=>toastEl.classList.remove("show"), 2100);
    }

    function getRef(){
      const u = new URL(location.href);
      const r = u.searchParams.get("ref");
      const num = r ? Number(r) : null;
      return Number.isFinite(num) ? num : null;
    }
    function buildLink(id){
      const u = new URL(location.href);
      u.searchParams.set("ref", String(id));
      u.hash = "";
      return u.toString();
    }

    function load(){ try{ return JSON.parse(localStorage.getItem(LS) || "null"); }catch{ return null; } }
    function save(s){ localStorage.setItem(LS, JSON.stringify(s)); }
    function init(){
      const s = load() || { next:1, me:null, users:{} };
      save(s); return s;
    }

    async function copyLink(){
      const s = init();
      if(!s.me) return;
      const link = buildLink(s.me.id);
      try{
        await navigator.clipboard.writeText(link);
        toast("LINK COPIED");
      }catch{
        toast("COPY FAILED (browser)");
      }
    }

    function render(){
      const s = init();
      const ref = getRef();
      $("refHint").textContent = "ref: " + (ref ? fmt(ref) : "—");

      const me = s.me;
      $("hudId").textContent = me ? fmt(me.id) : "—";
      $("hudBy").textContent = me ? (me.by ? fmt(me.by) : "—") : "—";
      $("hudInf").textContent = me ? String(me.inf||0) : "—";

      $("pId").textContent = me ? fmt(me.id) : "—";
      $("pBy").textContent = me ? (me.by ? fmt(me.by) : "—") : "—";
      $("pInf").textContent = me ? String(me.inf||0) : "—";

      $("btnInfect").disabled = !me;
      $("btnCopy").disabled = !me;

      // local leaderboard
      const rows = Object.values(s.users).sort((a,b)=>(b.inf||0)-(a.inf||0) || a.id-b.id);
      const tb = $("lb");
      tb.innerHTML = "";
      if(!rows.length){
        tb.innerHTML = `<tr><td style="color:rgba(233,255,242,.55)">—</td><td class="num">—</td><td style="color:rgba(233,255,242,.55)">—</td><td style="color:rgba(233,255,242,.55)">—</td></tr>`;
      }else{
        rows.slice(0,25).forEach((u,i)=>{
          const tr = document.createElement("tr");
          tr.innerHTML = `<td style="color:rgba(233,255,242,.65)">#${i+1}</td>
                          <td class="num">${fmt(u.id)}</td>
                          <td style="color:rgba(233,255,242,.75)">${u.inf||0}</td>
                          <td style="color:rgba(233,255,242,.65)">${u.by?fmt(u.by):"—"}</td>`;
          tb.appendChild(tr);
        });
      }
    }

    function claim(){
      const s = init();
      if(s.me){ toast("ALREADY HAS ID"); return; }
      const ref = getRef();
      const id = s.next++;
      const me = { id, by: ref || null, inf: 0 };
      s.me = me;
      s.users[String(id)] = me;

      // demo: if ref exists locally -> +1 infection
      if(ref && s.users[String(ref)]) s.users[String(ref)].inf = (s.users[String(ref)].inf || 0) + 1;

      save(s);

      // update URL instantly
      history.replaceState(null, "", buildLink(id));

      toast("ID ISSUED: " + fmt(id));
      render();
    }

    function infect(){
      copyLink();
      toast("SEND LINK TO A FRIEND");
    }

    function reset(){
      localStorage.removeItem(LS);
      toast("RESET");
      render();
    }

    function fullscreen(){
      const el = document.documentElement;
      if(!document.fullscreenElement) el.requestFullscreen?.();
      else document.exitFullscreen?.();
    }

    // wire
    $("btnClaim").onclick = claim;
    $("btnInfect").onclick = infect;
    $("btnCopy").onclick = copyLink;
    $("btnReset").onclick = reset;
    $("btnFull").onclick = fullscreen;

    // screens (пока один экран, просто подсветка заголовка)
    $("btnTop").onclick = ()=>{ $("centerTitle").textContent="LEADERBOARD"; toast("LEADERBOARD"); };
    $("btnLineage").onclick = ()=>{ $("centerTitle").textContent="LINEAGE"; toast("LINEAGE (next)"); };

    render();
  </script>
</body>
</html>
